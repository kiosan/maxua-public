<div class="post-card" data-post-id="{{id}}">
  {{#if noLink}}
    <div class="post-content">{{{content_html}}}</div>
  {{else}}
    <a href="{{permalink this}}" class="post-card-link">
      <div class="post-content">{{{content_html}}}</div>
    </a>
  {{/if}}
  
  {{#if metadata.url}}
  <div class="post-link-preview" onclick="window.open('{{metadata.url}}', '_blank', 'noopener,noreferrer'); event.preventDefault(); event.stopPropagation();">
    {{#if metadata.image_url}}
    <div class="link-preview-image">
      <img src="{{metadata.image_url}}" alt="Link preview" class="link-image">
    </div>
    {{/if}}
    
    <div class="link-preview-info">
      {{#if metadata.title}}
        <div class="link-title">{{metadata.title}}</div>
      {{/if}}
      
      {{#if metadata.description}}
        <div class="link-description">{{metadata.description}}</div>
      {{/if}}
      
      {{#if metadata.url}}
        <div class="link-url-display">
          <span class="link-source">
            {{getDomain metadata.url}}
          </span>
        </div>
      {{/if}}
    </div>
  </div>
  {{/if}}

  <div class="post-meta">
    <div class="post-date">
      <span class="post-date-text">{{formatted_date}}</span>
      <a href="#" class="translate-link" data-post-id="{{id}}" data-translated="false">Translate</a>
  {{#if editBtn}}
      <span x-data="{ isAdmin: false }" x-init="isAdmin = localStorage.getItem('microblog_auth') !== null">
        <a x-show="isAdmin" href="/compose?edit={{id}}" class="edit-link">Edit</a>
      </span>
  {{/if}}
    </div>
  </div>

  {{#if metadata.transistor_embed_code}}
  <iframe width="100%" height="180" style="margin: 1rem 0 0 0"
       frameborder="no" scrolling="no" seamless=""
       src="https://share.transistor.fm/e/{{metadata.transistor_embed_code}}"></iframe>
  {{/if}}
</div>
